<odoo>
        <record id="report_wizard_view_form" model="ir.ui.view">
            <field name="name">report_wizard_view_form.form</field>
            <field name="model">wizard.project.report</field>
            <field name="arch" type="xml">
                <form string="Selecciona un paciente">
                        <h4>Selecciona el paciente.</h4>
                        <group>
                            <group >
                                <field name="history_select"/>
                            </group>
                        </group>

                    <footer>
                        <button name="print_project_report_pdf" type="object" string="Imprimir Certificado" class="oe_highlight"/>
                        <button name="print_remission_report_pdf" type="object" string="Imprimir Remision" class="oe_highlight"/>
                        <button name="print_formula_report_pdf" type="object" string="Imprimir Formula" class="oe_highlight"/>
                        <button special="cancel" string="Cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <act_window
            id="project_report_open_wizard"
            name="Project Report"
            res_model="wizard.project.report"
            view_mode="form"
            view_id="report_wizard_view_form"
            target="new"/>

    <record id="seq_folio_history_clinical" model="ir.sequence">
        <field name="name">Secuencia Folio</field>
        <field name="code">historial.clinicoo</field>
        <field name="prefix">HC</field>
        <field name="padding">5</field>
        <field name="company_id" eval="False" />
    </record>
<!--
**********************************
convenios
**********************************
-->
           <record model="ir.actions.act_window" id="action_convenios">
                <field name="name">Convenios</field>
                <field name="type">ir.actions.act_window</field>
                <field name="res_model">convenio.cliente</field>
                <field name="view_type">form</field>
                <field name="view_mode">tree,form</field>
                <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click para agregar un convenio a el sistema.
                      </p><p>
                        lorep ipsum
                      </p>
                </field>




            </record>


<!--
**********************************
historial clinico
**********************************
-->

        <record id="historial_clinico_list" model="ir.ui.view">
            <field name="name">historial.clinico.tree</field>
            <field name="model">historial.clinico</field>
            <field name="arch" type="xml">
                <tree string="Consulta Clinica"  decoration-bf="state=='cita'" decoration-muted="state=='cerrada'" decoration-danger="state=='cancelada'" decoration-info="state=='proceso'">
                    <field name="folio"/>
                    <field name="partner_id"/>
                    <field name="convenio_id"/>
                    <field name="fecha"/>
                    <field name="motivo"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="historial_clinico_form" model="ir.ui.view">
            <field name="name">historial.clinico.form</field>
            <field name="model">historial.clinico</field>
            <field name="arch" type="xml">
                <form string="Consulta Clinica" attrs="{'readonly':[('state','=','cerrada')]}">
                    <header>
                        <button name="print_remission_pdf" type="action" string="Imprimir Remision" class="oe_highlight" attrs="{'invisible':[('is_remision','=',False)]}"/>
                        <button name="cita" states="cancelada" string="Cita" type="object" />
                        <button name="proceso" states="cita" string="En Proceso" type="object" />
                        <button name="cerrada" states="proceso" string="Finalizar Consulta" type="object" />
                        <button name="cancelada" states="cita,proceso" string="Cancelar" type="object" />
                        <field name="state" widget="statusbar" />
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h3>Documento No. <field name="documento" attrs="{'readonly':[('state','in',('cancelada','cerrada','proceso','cita'))]}"/></h3>
                            <h1>Folio: <field name="folio" readonly="1"/></h1>
                        </div>
                         <div class="oe_title">
                            <label class="oe_edit_only" for="partner_id" string="Paciente"/>
                            <h1><field name="partner_id" options="{'no_create': False,'no_create_edit':False}" attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></h1>
                         </div>
                        <group>
                            <group>
                                <field name="fecha" attrs="{'readonly':[('state','in',('cancelada','cerrada','proceso'))]}"/>
                                <field name="convenio_id" attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                            </group>
                            <group>
                                <field name="optometra_id" attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}" required="1"/>
                                <field name="sede" attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}" />
                            </group>
                        </group>
                        <group>
                            <field name="finalidad" attrs="{'readonly':[('state','in',('cancelada','cerrada', 'proceso','cita'))]}"/>
                            <field name="motivo" attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                            <field name="tipo_servicio" attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                        </group>
                        <group string="Antecedentes" attrs="{'invisible':[('state','==', 'proceso')]}">
                            <field name="is_licor" />
                            <field name="is_fumador"/>
                            <field name="is_lentes"/>
                            <field name="lentes_desc" attrs="{'invisible':[('is_lentes','=',False)]}"/>
                            <field name="is_enfermedad_here"/>
                            <field name="enfermedad_here_desc" attrs="{'invisible':[('is_enfermedad_here','=',False)]}"/>
                            <field name="is_operaciones"/>
                            <field name="operaciones_desc" attrs="{'invisible':[('is_operaciones','=',False)]}"/>
                            <field name="is_alergias"/>
                            <field name="alergias_desc" attrs="{'invisible':[('is_alergias','=',False)]}"/>
                            <field name="is_medicacion"/>
                            <field name="medicacion_desc" attrs="{'invisible':[('is_medicacion','=',False)]}"/>
                        </group>
                        <notebook attrs="{'invisible':[('state','==', 'cita')]}">
                            <page string="EXAMEN">
                                <group string="LENSOMETRIA">
                                 </group>
                                    <center>
                                        <table id="rx_uso" style="width:90%">
                                              <tr>
                                                    <th><center>...</center></th>
                                                    <th>ESF</th>
                                                    <th>CIL</th>
                                                    <th>EJE</th>
                                                    <th>ADD</th>
                                              </tr>
                                              <tr>
                                                    <th>OD</th>
                                                    <th><field name="rx_uso_od_esf"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_uso_od_cil"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_uso_od_eje"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_uso_oi_add"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                              </tr>
                                              <tr>
                                                <th>OI</th>
                                                <th><field name="rx_uso_oi_esf"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                <th><field name="rx_uso_oi_cil"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                <th><field name="rx_uso_oi_eje"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                <th><field name="rx_uso_od_add"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                              </tr>
                                        </table>
                                        <group string=" ">
                                                <field name="rx_uso_observaciones"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}" />
                                        </group>
                                    </center>
                                <style>
                                    #rx_uso {
                                      font-family: arial, sans-serif;
                                      border-collapse: collapse;
                                      width: 100%;
                                    }

                                    #rx_uso td, th {
                                      border: 1px solid #dddddd;
                                      text-align: left;
                                      padding: 8px;
                                    }
                                </style>
                                <hr/>
                                <group string="AGUDEZA VISUAL">
                                 </group>
                                <center>
                                <table id="rx_uso" style="width:90%">
                                      <tr>
                                            <th><center><strong>SIN CORRECCION</strong></center></th>
                                            <th>VL</th>
                                            <th>VP</th>
                                      </tr>
                                      <tr>
                                            <th>OD</th>
                                            <th><field name="av_sc_od_vl"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                            <th><field name="av_sc_od_vp"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                      </tr>
                                      <tr>
                                            <th>OI</th>
                                            <th><field name="av_sc_oi_vl"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                            <th><field name="av_sc_oi_vp"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                      </tr>
                                </table>
                                </center>
                                <br/>
                                <hr/>
                                <group string="Examenes">

                                </group>
                                <group>
                                    <field name="examen_anterior"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    <field name="examen_motor"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    <field name="oftalmoscopia"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                </group>
                                <group>
                                    <group>
                                       <field name="ishihara"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    </group>
                                    <group>
                                        <field name="estereopsis"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    </group>
                                </group>
                                <br/>
                                <hr/>
                                <group string="QUERATOMETRIA">
                                 </group>
                                <center>
                                <table id="rx_uso" style="width:90%">
                                    <tr>
                                        <td>OJO DERECHO</td>
                                        <th><field name="queratometria_od"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                        <td>OJO IZQUIERDO</td>
                                        <th><field name="queratometria_oi"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                    </tr>
                                </table>
                                </center>
                                <br/>
                                <hr/>
                                <group string="REFRACCION">
                                 </group>
                                <center>
                                <table id="rx_uso" style="width:90%">
                                    <tr>
                                        <th>OJO DERECHO</th>
                                        <td><field name="refraccion_od"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></td>
                                        <th>OJO IZQUIERDO</th>
                                        <td><field name="refraccion_oi"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></td>
                                    </tr>
                                </table>
                                </center>
                                <br/>
                                <hr/>
                                <group string="REFRACCION BAJO CICLOPLEJIA ">
                                 </group>
                                <center>
                                <table id="rx_uso" style="width:90%">
                                    <tr>
                                        <th>OJO DERECHO</th>
                                        <td><field name="refraccion_bajo_od"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></td>
                                        <th>OJO IZQUIERDO</th>
                                        <td><field name="refraccion_bajo_oi"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></td>
                                    </tr>
                                </table>
                                    <group string=" ">
                                          <field name="refraccion_bajo_observaciones" attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    </group>
                                </center>
                                <br/>
                                <hr/>

                            </page>
                            <page string="RX FINAL" >
                                <group string="RX FINAL">
                                 </group>
                                <center>
                                        <table id="rx_uso" style="width:90%">
                                              <tr>
                                                    <th><center>...</center></th>
                                                    <th>ESF</th>
                                                    <th>CIL</th>
                                                    <th>EJE</th>
                                                    <th>ADD</th>
                                                    <th>AV</th>
                                                    <th>DP</th>
                                                    <th>DNP</th>
                                                    <th>Prisma</th>
                                              </tr>
                                              <tr>
                                                    <th>OD</th>
                                                    <th><field name="rx_final_od_esf"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_od_cil"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_od_eje"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_od_add"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_od_av"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_od_dp"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_od_dnp"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_od_prisma"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                              </tr>
                                              <tr>
                                                    <th>OI</th>
                                                    <th><field name="rx_final_oi_esf"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_oi_cil"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_oi_eje"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_oi_add"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_oi_av"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_oi_dp"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_oi_dnp"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                                    <th><field name="rx_final_od_prisma"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/></th>
                                              </tr>
                                        </table>
                                    </center>
                                    <br/>
                                <group>
                                    <group>
                                        <field name="tipo_de_lente"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    </group>
                                    <group>
                                        <field name="is_seguimiento"/>
                                    </group>
                                </group>
                                <group attrs="{'invisible':[('is_seguimiento','=',False)]}" >
                                    <field name="seguimientos_id"/>
                                </group>
                            </page>
                            <page string="DIAGNOSTICO">
                                <group string="Oftalmoscopia">
                                    <field name="oftalmoscopia"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                </group>
                                <group string="Dx">
                                    <field name="dx_primario"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    <field name="dx_secundario"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    <field name="dx_terciario"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                </group>
                                <group>
                                <field name="is_remision"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                <field name="remision_desc" attrs="{'invisible':[('is_remision','=',False)]}" />
                                <field name="observaciones"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                <field name="conducta"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                </group>
                            </page>
                            <page string="PRESCRIPCION Y USO">
                                <group string="PRESCRIPCION">
                                    <field name="pres_tipo_lente"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    <field name="pres_material"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                    <field name="pres_filtro"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                </group>
                                <group string="Uso">
                                    <field name="pres_uso"  attrs="{'readonly':[('state','in',('cancelada','cerrada'))]}"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="historial_clinico_search" model="ir.ui.view">
            <field name="name">historial.clinico.serch</field>
            <field name="model">historial.clinico</field>
            <field name="arch" type="xml">
                <search string="Consulta Clinica">
                    <field name="folio" />
                    <field name="nombre" filter_domain="[('nombre','ilike',self)]" string="Paciente..."/>
                    <field name="partner_id"/>
                    <field name="motivo"/>
                    <filter domain="[('state', '=', 'cita')]" string="Citas" name="citas_programadas"/>
                    <filter domain="[('state', '=', 'cancelada')]" string="Canceladas"/>
                    <group expand="0" string="Agrupar...">
                        <filter string="Paciente" domain="" context="{'group_by':'partner_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record  id="calendar_clinic_historial" model="ir.ui.view">
            <field name="name">historial.clinico.calendar.lead</field>
            <field name="model">historial.clinico</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar string="Consultas" date_start="fecha" color="state" mode="month">
                    <field name="nombre"/>
                    <field name="convenio_id"/>
                </calendar>
            </field>
        </record>



    <record id="action_historial_clinico" model="ir.actions.act_window">
            <field name="name">Consulta Clinica</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">historial.clinico</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="view_id" ref="historial_clinico_list"/>
        </record>

    <record id="action_historial_clinico_agenda" model="ir.actions.act_window">
            <field name="name">Citas Programadas</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">historial.clinico</field>
            <field name="view_type">form</field>
            <field name="context">{'search_default_citas_programadas': True,}</field>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="historial_clinico_list"/>
        </record>


</odoo>